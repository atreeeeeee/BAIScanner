<script>
  const screens = document.querySelectorAll('.screen');
  const navStack = [];

  function showScreen(id) {
    screens.forEach(s => {
      const isTarget = s.id === id;
      s.classList.toggle('active', isTarget);
      if (!isTarget) clearFields(s); // Clear fields when leaving
    });

    if (id === 'form') {
      clearFields(document.getElementById('form'));
    } else if (id === 'login') {
      clearFields(document.getElementById('login'));
    }
  }

  function clearFields(container) {
    container.querySelectorAll('input').forEach(input => input.value = '');
    const err = container.querySelector('.error');
    if (err) err.textContent = '';
  }

  function goToScreen(target) {
    const current = Array.from(screens).find(s => s.classList.contains('active')).id;
    navStack.push(current);
    showScreen(target);
  }

  function goBack() {
    const prev = navStack.pop();
    if (prev) showScreen(prev);
  }

  document.querySelectorAll('button[data-target]').forEach(btn => {
    btn.addEventListener('click', () => goToScreen(btn.dataset.target));
  });

  document.querySelectorAll('.back-btn').forEach(btn => btn.addEventListener('click', goBack));

  document.getElementById('loginBtn').addEventListener('click', () => {
    const em = document.getElementById('email').value.trim(),
          pw = document.getElementById('password').value.trim(),
          err = document.getElementById('loginError');
    if (!em || !pw) {
      err.textContent = 'Please enter both email and password.';
    } else {
      err.textContent = '';
      showScreen('dashboard');
    }
  });

  document.getElementById('submitNameBtn').addEventListener('click', () => {
    const fn = document.getElementById('firstName').value.trim(),
          ln = document.getElementById('lastName').value.trim();
    if (!fn || !ln) {
      alert('Please enter both first and last name.');
      return;
    }

    alert(`Name submitted: ${fn} ${ln}`);
    document.getElementById('firstName').value = '';
    document.getElementById('lastName').value = '';
    // Don't navigate away â€“ stay on the same screen
  });
</script>
